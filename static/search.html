<!DOCTYPE html>
<html>
    <head>
        <title>File Indexer</title>
        <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    </head>
    <body>
        <h2>Search directory {{.DirectoryPath}}</h2>
        <input type="text" id="search-input" placeholder="Enter search term"/>
        <button onclick="search()">Search</button>
        <ul id="result-list"></ul>
    </body>

    <script>
        async function search() {
            const searchTerm = document.getElementById("search-input").value;
            const searchUrl = "/search?q=" + encodeURIComponent(searchTerm);
            fetch(searchUrl).then(response => response.json()).then(results => {
                const resultContainer = document.getElementById("result-list");
                resultContainer.innerHTML = "";
                results.forEach(result => {
                    console.log(result);
                    const listItem = document.createElement("li");
                    listItem.textContent = `File: ${result.FileName}, Line: ${result.LineNumber}, Text: ${result.Text}`;
                    resultContainer.appendChild(listItem);
                });
            });
        }
    </script>

</html>